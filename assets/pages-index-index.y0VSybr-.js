var l=(l,a,s)=>new Promise(((e,t)=>{var c=l=>{try{o(s.next(l))}catch(a){t(a)}},d=l=>{try{o(s.throw(l))}catch(a){t(a)}},o=l=>l.done?e(l.value):Promise.resolve(l.value).then(c,d);o((s=s.apply(l,a)).next())}));import{r as a,c as s,o as e,a as t,w as c,i as d,b as o,d as r,n as u,e as n,t as i,f,g as _,F as m,h as p,j as v,s as g,k as y,S as b,I as h,l as k}from"./index-CTc8QSv-.js";import{u as C}from"./water-record.DNI4sOQI.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=x({__name:"index",setup(x){const w=C(),S=a(44),$=[100,200,300,500],j=a(!1),R=a(200),V=s((()=>w.progress)),F=s((()=>w.todayTotal)),I=s((()=>w.dailyGoal)),M=s((()=>w.remaining)),P=s((()=>w.todayRecords.slice(0,5))),T=l=>{const a=new Date(l);return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},D=a=>l(this,null,(function*(){yield w.addRecord(a),g({title:`å·²æ·»åŠ ${a}ml`,icon:"success"})})),G=()=>l(this,null,(function*(){!R.value||R.value<=0?g({title:"è¯·è¾“å…¥æœ‰æ•ˆæ•°å€¼",icon:"none"}):(yield w.addRecord(Number(R.value)),j.value=!1,R.value=200,g({title:`å·²æ·»åŠ ${R.value}ml`,icon:"success"}))})),H=a=>l(this,null,(function*(){k({title:"ç¡®è®¤åˆ é™¤",content:"ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ",success:s=>l(this,null,(function*(){s.confirm&&(yield w.deleteRecord(a),g({title:"å·²åˆ é™¤",icon:"success"}))}))})}));return e((()=>{w.loadFromLocal()})),(l,a)=>{const s=d,e=y,g=b,k=h;return o(),t(s,{class:"page-container"},{default:c((()=>[r(s,{class:"status-bar",style:u({height:S.value+"px"})},null,8,["style"]),r(s,{class:"nav-bar"},{default:c((()=>[r(e,{class:"nav-title"},{default:c((()=>[n("å¥åº·é¥®æ°´")])),_:1}),r(s,{class:"nav-right"},{default:c((()=>[r(e,{class:"nav-icon"},{default:c((()=>[n("ðŸ””")])),_:1})])),_:1})])),_:1}),r(g,{class:"main-content","scroll-y":""},{default:c((()=>[r(s,{class:"progress-section"},{default:c((()=>[r(s,{class:"progress-ring-container"},{default:c((()=>[r(s,{class:"progress-ring progress-ring-outer"},{default:c((()=>[r(s,{class:"progress-ring-inner",style:u({transform:`rotate(${3.6*V.value}deg)`})},null,8,["style"])])),_:1}),r(s,{class:"progress-ring progress-ring-progress",style:u({"--progress":V.value+"%"})},{default:c((()=>[r(s,{class:"progress-fill"})])),_:1},8,["style"]),r(s,{class:"progress-center"},{default:c((()=>[r(e,{class:"progress-percent"},{default:c((()=>[n(i(Math.round(V.value))+"%",1)])),_:1}),r(e,{class:"progress-label"},{default:c((()=>[n("ä»Šæ—¥è¿›åº¦")])),_:1})])),_:1})])),_:1}),r(s,{class:"progress-stats"},{default:c((()=>[r(s,{class:"stat-item"},{default:c((()=>[r(e,{class:"stat-value"},{default:c((()=>[n(i(F.value),1)])),_:1}),r(e,{class:"stat-label"},{default:c((()=>[n("ä»Šæ—¥å·²é¥®(ml)")])),_:1})])),_:1}),r(s,{class:"stat-divider"}),r(s,{class:"stat-item"},{default:c((()=>[r(e,{class:"stat-value"},{default:c((()=>[n(i(I.value),1)])),_:1}),r(e,{class:"stat-label"},{default:c((()=>[n("ç›®æ ‡(ml)")])),_:1})])),_:1}),r(s,{class:"stat-divider"}),r(s,{class:"stat-item"},{default:c((()=>[r(e,{class:"stat-value"},{default:c((()=>[n(i(M.value),1)])),_:1}),r(e,{class:"stat-label"},{default:c((()=>[n("è¿˜å·®(ml)")])),_:1})])),_:1})])),_:1})])),_:1}),r(s,{class:"add-section"},{default:c((()=>[r(s,{class:"add-buttons"},{default:c((()=>[(o(),f(m,null,_($,(l=>r(s,{class:"add-btn",key:l,onClick:a=>D(l)},{default:c((()=>[r(e,{class:"add-btn-text"},{default:c((()=>[n("+"+i(l)+"ml",1)])),_:2},1024)])),_:2},1032,["onClick"]))),64))])),_:1}),r(s,{class:"add-btn-large",onClick:a[0]||(a[0]=l=>j.value=!0)},{default:c((()=>[r(e,{class:"add-btn-large-text"},{default:c((()=>[n("+ æ·»åŠ é¥®æ°´")])),_:1})])),_:1})])),_:1}),r(s,{class:"recent-section"},{default:c((()=>[r(s,{class:"section-header"},{default:c((()=>[r(e,{class:"section-title"},{default:c((()=>[n("æœ€è¿‘è®°å½•")])),_:1}),r(e,{class:"section-more"},{default:c((()=>[n("æŸ¥çœ‹å…¨éƒ¨")])),_:1})])),_:1}),r(s,{class:"records-list"},{default:c((()=>[(o(!0),f(m,null,_(P.value,(l=>(o(),t(s,{class:"record-item",key:l.id},{default:c((()=>[r(s,{class:"record-icon"},{default:c((()=>[n("ðŸ’§")])),_:1}),r(s,{class:"record-info"},{default:c((()=>[r(e,{class:"record-amount"},{default:c((()=>[n(i(l.amount)+"ml",1)])),_:2},1024),r(e,{class:"record-time"},{default:c((()=>[n(i(T(l.recordTime)),1)])),_:2},1024)])),_:2},1024),r(s,{class:"record-delete",onClick:a=>H(l.id)},{default:c((()=>[r(e,null,{default:c((()=>[n("Ã—")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)))),128)),0===P.value.length?(o(),t(s,{key:0,class:"empty-records"},{default:c((()=>[r(e,null,{default:c((()=>[n("æš‚æ— è®°å½•ï¼Œå¼€å§‹å–æ°´å§ï¼")])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1}),j.value?(o(),t(s,{key:0,class:"modal-mask",onClick:a[4]||(a[4]=l=>j.value=!1)},{default:c((()=>[r(s,{class:"modal-content",onClick:a[3]||(a[3]=v((()=>{}),["stop"]))},{default:c((()=>[r(s,{class:"modal-header"},{default:c((()=>[r(e,{class:"modal-title"},{default:c((()=>[n("è‡ªå®šä¹‰é¥®æ°´é‡")])),_:1})])),_:1}),r(s,{class:"modal-body"},{default:c((()=>[r(k,{class:"modal-input",type:"number",modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=l=>R.value=l),placeholder:"è¯·è¾“å…¥é¥®æ°´é‡(ml)"},null,8,["modelValue"]),r(s,{class:"modal-presets"},{default:c((()=>[(o(),f(m,null,_($,(l=>r(s,{class:"preset-btn",key:l,onClick:a=>R.value=l},{default:c((()=>[n(i(l)+"ml ",1)])),_:2},1032,["onClick"]))),64))])),_:1})])),_:1}),r(s,{class:"modal-footer"},{default:c((()=>[r(s,{class:"modal-btn cancel",onClick:a[2]||(a[2]=l=>j.value=!1)},{default:c((()=>[n("å–æ¶ˆ")])),_:1}),r(s,{class:"modal-btn confirm",onClick:G},{default:c((()=>[n("ç¡®å®š")])),_:1})])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1})}}},[["__scopeId","data-v-f9f6f1f3"]]);export{w as default};
